!function (e, i, t) { t.showPngAd = function (n, a, l) { var s = i.extend({ page: 3, mode: 1, type: 1, zoom: 1 }, n || {}), g = i.isFunction(l) ? l : i.noop, p = (a || "pngAd") + s.id; if (!s.id || !s.png || !s.url) return g(0); s.png = i.isArray(s.png) ? s.png : s.png.split(","); s.url = i.isArray(s.url) ? s.url : s.url.split(","); if (1 === s.url.length) s.url = s.url[0]; if (!o.checkUrl(s.url)) { LS.set(p, "-1"); return g(0) } var f = function (e, i, t, r, o, n) { return "position:absolute;display:block;width:" + e + "px;height:" + i + "px;right:" + t + ";top:" + r + ";z-index:" + o + ";" + u(n) }, u = function (e) { return "background:url(" + e + ") no-repeat 0 0;_background-image:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=" + e + ");" }; var d = e.LS.get(p); if (d) { if ("-1" == d) return g(0); if (/^\d+$/.test(d) && new Date(+d) > t.serverTime()) return g(0) } s.type = { 1: 1, 2: 2, 3: 3, 4: 4, 5: 5 }[s.type] || 1; if (this["_pngAdLock" + s.type]) return g(0); this["_pngAdLock" + s.type] = true; o.loadImg(s.png, function (o) { var n = [f(34, 33, "12%", "15%", 2, t.cdnUrl + "/img/popularize/dialogClose.png"), f(34, 33, "1%", "2%", 2, t.cdnUrl + "/img/popularize/dialogClose.png"), f(14, 13, "-15px", "10px", 2, t.cdnUrl + "/img/popularize/dialogCloseMini.png"), f(34, 33, "2%", "2%", 2, t.cdnUrl + "/img/popularize/dialogClose.png"), f(34, 33, "auto", "2%", 2, t.cdnUrl + "/img/popularize/dialogClose.png") + "left:2%"][s.type - 1]; var a = function () { if (3 != s.type) { var e = o[0].width, t = o[0].height, r = i.isArray(s.url) ? s.url[0] : s.url; return "<div style='width:" + e + "px;height:" + t + "px'><div class='pimgBox'><a href='" + r + "' target='_blank' class='link" + p + "' style='" + f(e, t, 0, 0, 1, o[0].png) + "'></a><a class='iDialogClose' href='javascript:;' hidefocus='true' style='border:none;" + n + "'></a></div></div>" } if (3 == s.type) { var a = []; i.each(o, function (e, t) { var r = i.isArray(s.url) ? s.url[e] || "javascript:;" : s.url; a.push("<a href='" + r + "' class='link" + p + "' target='_blank' style='float:left'><img src='" + t.png + "'/></a>") }); var l = 0; i.each(o, function (e, i) { l = Math.max(l, i.height) }); var g = function () { if (i.browser.msie && i.browser.version < 10) return "filter:progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000,endcolorstr=#7F000000);"; else return "background:rgba(0,0,0,.5);" }(); return "<div style='opacity:0.96;" + g + "box-shadow:0 0 10px #ccc;width:100%;height:" + l + "px;overflow:hidden;'><div style='width:990px;margin:auto;position:relative'>" + a.join("") + "<a class='iDialogClose' href='javascript:;' hidefocus='true' style='border:none;" + n + "'></a></div></div>" } }(); var l = function (i) { if (2 == s.mode || 5 == s.mode || 3 == s.mode && !i) { e.LS.set(p, +t.serverTime() + 24 * 60 * 60 * 1e3); return } e.LS.set(p, "-1") }; if (4 == s.type || 5 == s.type) { var g = ["position:fixed;right:50%;margin-right:495px;z-index:12;", "position:fixed;left:50%;margin-left:495px;z-index:12;"][s.type - 4], u = "couplet" + s.type, d; if (i(".zxNav").length > 0) d = i(".zxNav"); else if (i(".zx_nav").length > 0) d = i(".zx_nav"); else if (i(".mainNav").length > 0) d = i(".mainNav"); else if (i("#topTabBox").length > 0) d = i("#topTabBox"); else return; d.after("<div id='" + u + "' style='" + g + "' >" + a + "</div>"); i("#" + u + " .iDialogClose").click(function () { l(); i("#" + u).remove() }); return } i.dialog({ title: null, content: a, type: "shell", button: [], width: 0, dragable: 0, position: ["c", "rb", { width: "100%", left: 0, bottom: 0 }][s.type - 1], layout: [1, 0, 0][s.type - 1], animate: [5, 0, 0][s.type - 1], init: function () { var t = this.id; i(".link" + p).click(function () { l(1); e.setTimeout(function () { i.dialog(t, true) }, 50) }); if (2 == s.type) r(i(".iDialogClose", this)[0], .8, 0, 0, .8, 0, 0); if (4 == s.mode) e.LS.set(p, "-1"); if (1 != s.zoom) { var n = i(">div", this), a = i(this).find(".pimgBox"); r(a[0], s.zoom, 0, 0, s.zoom, 0, 0); if (5 == s.mode) { n.css({ width: o[0].width * s.zoom, height: o[0].height * s.zoom }); a.css({ position: "absolute", right: 0 }) } } } }, function (e) { if (5 == s.mode) LS.remove("seoAdCache"); e || l(e) }) }); return g(s.type) }; function r(e, t, r, o, n, a, l) { var s = ["O", "Ms", "ms", "Moz", "Webkit", ""], g = s.length, p = "matrix("; p += [t || 0, r || 0, o || 0, n || 0, 0, 0].join(","); p += ")"; if (!e) return; if ("number" == typeof a) e.style.marginLeft = a + "px"; if ("number" == typeof l) e.style.marginTop = l + "px"; for (var f = 0; f < g; f += 1)if (s[f]) e.style[s[f] + "Transform"] = p; else e.style["transform"] = p; if (i.browser.msie && i.browser.version < 9) { var u = "DXImageTransform.Microsoft.Matrix"; var d = e.style; if (~d.filter.indexOf(u)) { var c = e.filters.item(u); c.M11 = t, c.M12 = -r, c.M21 = -o, c.M22 = n } else d.filter += " progid:" + u + "(M11=" + t + ", M12=" + -r + ", M21=" + -o + ", M22=" + n + ", SizingMethod='auto expand')" } } var o = { getMainUrl: function (e) { return e.replace(/\#.*/g, "") }, checkUrl: function (e) { var t = this.getMainUrl(document.URL.toLowerCase()), r = i.isArray(e) ? e : [e]; for (var o = 0, n = r.length, a = 0; o < n; o++)if (this.getMainUrl(r[o].toLowerCase()) == t) a++; return n > a }, loadImg: function (e, t) { var r = i.isArray(e) ? e : [e], o = r.length, n = 0, a = [], l = function (e, i) { var r = new Image; r.onload = function () { n++; a[e] = { width: this.width, height: this.height, png: i }; if (n === o) t(a) }; r.src = i }; for (var s = 0, o = r.length; s < o; s++)l(s, r[s]) } } }(window, jQuery, Core);